(function(k,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(k=typeof globalThis!="undefined"?globalThis:k||self,e(k.Tree={},k.Vue))})(this,function(k,e){"use strict";var g=(n,t)=>{const o=n.__vccOpts||n;for(const[d,c]of t)o[d]=c;return o};const S={},I={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},R=e.createVNode("polyline",{points:"9 18 15 12 9 6"},null,-1);function T(n,t){return e.openBlock(),e.createBlock("svg",I,[R])}var D=g(S,[["render",T]]);const A={},V={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},E=e.createVNode("polyline",{points:"6 9 12 15 18 9"},null,-1);function z(n,t){return e.openBlock(),e.createBlock("svg",V,[E])}var M=g(A,[["render",z]]);const q={},F={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},j=e.createVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),O=e.createVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1);function H(n,t){return e.openBlock(),e.createBlock("svg",F,[j,O])}var L=g(q,[["render",H]]),$="";const P={components:{ArrowRight:D,ArrowDown:M,DeleteIcon:L},props:{node:{type:Object,required:!0},indentSize:{type:Number,required:!0},gap:{type:Number,required:!0},getNode:{type:Function,required:!0},setNode:{type:Function,required:!0},updateNode:{type:Function,required:!0},expandRowByDefault:{type:Boolean,default:!1},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0},showPrependNodeText:{type:Boolean,default:!1}},emits:["nodeClick","toggleCheckbox","nodeExpanded","deleteRow"],setup(n,{emit:t}){const o=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.length}),d=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.filter(a=>a.checked).length}),c=l=>{n.node.expanded=n.node.nodes?!n.node.expanded:!1,e.nextTick(()=>{t("nodeExpanded",l,n.node.expanded)})};return{childCount:o,checkedChildCount:d,handleClick:(l,a)=>{!a&&n.expandable&&o.value&&c(l),t("nodeClick",{...l})},onNodeExpanded:(l,a)=>{t("nodeExpanded",l,a)},onToggleCheckbox:l=>{t("toggleCheckbox",l)},removedRow:l=>{t("deleteRow",l)}}}},U={key:0,class:"tree-row-item-icon-wrapper"},W={class:"tree-row-txt"},G={class:"child-count"};function J(n,t,o,d,c,i){const s=e.resolveComponent("arrow-right"),u=e.resolveComponent("arrow-down"),f=e.resolveComponent("delete-icon"),l=e.resolveComponent("tree-row",!0);return e.openBlock(),e.createBlock("li",{class:"tree-row",style:{gap:`${o.gap}px`,paddingLeft:`${o.indentSize}px`,"--row-hover-background":o.rowHoverBackground}},[e.createVNode("div",{class:"tree-row-item",onClick:t[4]||(t[4]=e.withModifiers(a=>d.handleClick(o.node),["stop"]))},[o.useIcon?(e.openBlock(),e.createBlock("div",U,[d.childCount?(e.openBlock(),e.createBlock(e.Fragment,{key:0},[o.node.expanded?e.renderSlot(n.$slots,"iconInactive",{key:1},()=>[e.createVNode(u)]):e.renderSlot(n.$slots,"iconActive",{key:0},()=>[e.createVNode(s)])],64)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"checkbox",{id:o.node.id,node:o.node,checked:o.node.checked,indeterminate:o.node.indeterminate},()=>[o.useCheckbox?e.withDirectives((e.openBlock(),e.createBlock("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=a=>o.node.checked=a),type:"checkbox",checked:o.node.checked,indeterminate:o.node.indeterminate,onClick:t[2]||(t[2]=e.withModifiers(a=>d.onToggleCheckbox(o.node),["stop"]))},null,8,["checked","indeterminate"])),[[e.vModelCheckbox,o.node.checked]]):e.createCommentVNode("",!0)]),e.renderSlot(n.$slots,"node",{node:o.node},()=>[e.createVNode("span",W,e.toDisplayString(o.node.label),1)]),d.childCount&&o.showChildCount?e.renderSlot(n.$slots,"childCount",{key:1,count:d.childCount,checkedCount:d.checkedChildCount,childs:o.node.nodes},()=>[e.createVNode("span",G,e.toDisplayString(d.childCount),1)]):e.createCommentVNode("",!0),!o.node.undeletable&&o.useRowDelete?(e.openBlock(),e.createBlock("div",{key:2,class:"delete-icon",onClick:t[3]||(t[3]=e.withModifiers(a=>d.removedRow(o.node),["stop"]))},[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(f)])])):e.createCommentVNode("",!0)]),o.node.expanded?(e.openBlock(),e.createBlock("ul",{key:0,class:"tree-list",style:{gap:`${o.gap}px`}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(o.node.nodes,a=>(e.openBlock(),e.createBlock(e.Fragment,{key:a.id},[a.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(l,{key:0,ref:`tree-row-${a.id}`,node:a,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,gap:o.gap,"expand-row-by-default":o.expandRowByDefault,"indent-size":o.indentSize,"row-hover-background":o.rowHoverBackground,"set-node":o.setNode,"get-node":o.getNode,"update-node":o.updateNode,expandable:o.expandable,onDeleteRow:d.removedRow,onNodeClick:t[5]||(t[5]=r=>d.handleClick(r,!0)),onToggleCheckbox:d.onToggleCheckbox,onNodeExpanded:d.onNodeExpanded},{node:e.withCtx(({node:r})=>[e.renderSlot(n.$slots,"node",{node:r})]),childCount:e.withCtx(({count:r,checkedCount:h,childs:N})=>[e.renderSlot(n.$slots,"childCount",{count:r,checkedCount:h,childs:N})]),iconActive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconActive",{},()=>[e.createVNode(s)])]),iconInactive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconInactive",{},()=>[e.createVNode(u)])]),deleteIcon:e.withCtx(()=>[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(f)])]),checkbox:e.withCtx(({node:r,checked:h,indeterminate:N})=>[e.renderSlot(n.$slots,"checkbox",{id:r.id,node:r,checked:h,indeterminate:N})]),_:2},1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","gap","expand-row-by-default","indent-size","row-hover-background","set-node","get-node","update-node","expandable","onDeleteRow","onToggleCheckbox","onNodeExpanded"]))],64))),128))],4)):e.createCommentVNode("",!0)],4)}var K=g(P,[["render",J]]);const C=n=>n.map(t=>{var i;if(!((i=t.nodes)!=null&&i.length))return{...t,expanded:!1};t.nodes=C(t.nodes);const o=t.nodes.every(s=>s.checked),d=t.nodes.some(s=>s.checked),c=t.nodes.some(s=>s.indeterminate);return t.checked=o,t.indeterminate=!o&&(d||c),t}),b=(n,t)=>{let o=[...n];return o=o.map(d=>{let i={checked:!!(t==null?void 0:t.checked),expanded:!1,indeterminate:!1,...d};return Array.isArray(i.nodes)&&(i.nodes=b(i.nodes,i)),i}),C(o)},Q=(n,t)=>{const o=(d,c)=>{if(c.label.toLowerCase().includes(t.toLowerCase()))return d.push(c),d;if(Array.isArray(c.nodes)){const s=c.nodes.reduce(o,[]);s.length&&d.push({...c,nodes:s})}return d};return n.reduce(o,[])};function y(n,t){for(let o=0;o<n.length;o++){const d=n[o];if(d.id===t)return d;if(Array.isArray(d.nodes)){const c=y(d.nodes,t);if(c)return c}}}const x=(n,t,o)=>n.map(d=>(d.id===t?d={id:t,...o}:Array.isArray(d.nodes)&&(d.nodes=x(d.nodes,t,o)),d));function B(n,t){const o=t!=null?t:n.checked;return n.checked=o,n&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.map(d=>{const c={...d,checked:o};return d.nodes?c.nodes.forEach(i=>B(i,o)):delete c.nodes,c})),n}const m=(n,t,o)=>n.map(d=>{let c=d;return c.id===t?c=B({...d,...o}):Array.isArray(c.nodes)&&(c.nodes=m(d.nodes,t,o)),c});function _(n,t){if(!Array.isArray(n))return;let o=[...n];for(let d=0;d<n.length;d++){const c=n[d];c.id===t?o=o.filter(i=>i.id!==t):c.nodes&&(c.nodes=_(c.nodes,t),c.nodes.length||delete c.nodes)}return o}function p(n){!n||(n.nodes&&n.nodes.forEach(p),n.expanded=!0)}var v="";const X={name:"Tree",components:{TreeRow:K},props:{nodes:{type:Array,required:!0},props:{type:Object,default(){return{nodes:"nodes",label:"label"}}},indentSize:{type:Number,default:24},gap:{type:Number,default:10},searchText:{type:String,default:""},expandRowByDefault:{type:Boolean,default:!1},expandAllRowsOnSearch:{type:Boolean,default:!0},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0}},emits:["nodeClick","nodeExpanded","checkboxToggle","update:nodes"],setup(n,{emit:t}){e.onMounted(()=>t("update:nodes",b(n.nodes)));const o=e.computed(()=>{let r=n.nodes;return n.searchText&&(r=Q(n.nodes,n.searchText),n.expandAllRowsOnSearch&&r.forEach(p)),C(r)}),d=r=>y(n.nodes,r),c=(r,h)=>{t("update:nodes",x(n.nodes,r,h))},i=(r,h)=>{t("update:nodes",C(m(n.nodes,r,h)))};return{setNode:c,getNode:d,updateNode:i,onNodeClick:r=>{t("nodeClick",r)},onNodeExpanded:(r,h)=>{t("nodeExpanded",r,h)},onUpdate:()=>{t("update:nodes",n.nodes)},onToggleCheckbox:r=>{const h=!r.checked;i(r.id,{checked:h}),t("nodeClick",{...r,checked:h})},onDeleteRow:r=>{_(n.nodes,r.id),t("update:nodes",C(_(n.nodes,r.id)))},filteredData:o}}},w=e.withScopeId("data-v-324b75f0");e.pushScopeId("data-v-324b75f0");const Y={class:"tree"};e.popScopeId();var Z=g(X,[["render",w((n,t,o,d,c,i)=>{const s=e.resolveComponent("tree-row");return e.openBlock(),e.createBlock("div",Y,[e.createVNode("ul",{class:"tree-list",style:{gap:`${o.gap}px`}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(d.filteredData,u=>(e.openBlock(),e.createBlock(e.Fragment,{key:u.id},[u.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(s,{key:0,ref:`tree-row-${u.id}`,node:u,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,"indent-size":o.indentSize,gap:o.gap,"row-hover-background":o.rowHoverBackground,"set-node":d.setNode,"get-node":d.getNode,"update-node":d.updateNode,expandable:o.expandable,onDeleteRow:d.onDeleteRow,onNodeClick:d.onNodeClick,onNodeExpanded:d.onNodeExpanded,onToggleCheckbox:d.onToggleCheckbox},e.createSlots({checkbox:w(({node:f,checked:l,indeterminate:a})=>[e.renderSlot(n.$slots,"checkbox",{node:f,checked:l,indeterminate:a,toggleCheckbox:()=>d.onToggleCheckbox(f)},void 0,!0)]),node:w(({node:f})=>[e.renderSlot(n.$slots,"node",{node:f},void 0,!0)]),_:2},[o.useIcon?{name:"iconActive",fn:w(()=>[e.renderSlot(n.$slots,"iconActive",{},void 0,!0)])}:void 0,o.useIcon?{name:"iconInactive",fn:w(()=>[e.renderSlot(n.$slots,"iconInactive",{},void 0,!0)])}:void 0,o.useRowDelete?{name:"deleteIcon",fn:w(()=>[e.renderSlot(n.$slots,"deleteIcon",{},void 0,!0)])}:void 0,o.showChildCount?{name:"childCount",fn:w(({count:f,checkedCount:l,childs:a})=>[e.renderSlot(n.$slots,"childCount",{count:f,checkedCount:l,childs:a},void 0,!0)])}:void 0]),1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","indent-size","gap","row-hover-background","set-node","get-node","update-node","expandable","onDeleteRow","onNodeClick","onNodeExpanded","onToggleCheckbox"]))],64))),128))],4)])})],["__scopeId","data-v-324b75f0"]]);k.default=Z,k.getNodeById=y,k.setNodeById=x,k.updateNodeById=m,Object.defineProperty(k,"__esModule",{value:!0}),k[Symbol.toStringTag]="Module"});
