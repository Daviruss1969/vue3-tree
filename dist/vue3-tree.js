var Tree=function(u,e){"use strict";var g=(n,t)=>{const o=n.__vccOpts||n;for(const[d,r]of t)o[d]=r;return o};const T={},S={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},I=e.createVNode("polyline",{points:"9 18 15 12 9 6"},null,-1);function R(n,t){return e.openBlock(),e.createBlock("svg",S,[I])}var D=g(T,[["render",R]]);const V={},A={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},E=e.createVNode("polyline",{points:"6 9 12 15 18 9"},null,-1);function z(n,t){return e.openBlock(),e.createBlock("svg",A,[E])}var M=g(V,[["render",z]]);const P={},F={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},q=e.createVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),j=e.createVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1);function O(n,t){return e.openBlock(),e.createBlock("svg",F,[q,j])}var H=g(P,[["render",O]]),v="";const L={components:{ArrowRight:D,ArrowDown:M,DeleteIcon:H},props:{node:{type:Object,required:!0},indentSize:{type:Number,required:!0},gap:{type:Number,required:!0},getNode:{type:Function,required:!0},setNode:{type:Function,required:!0},updateNode:{type:Function,required:!0},expandRowByDefault:{type:Boolean,default:!1},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0},showPrependNodeText:{type:Boolean,default:!1}},emits:["nodeClick","toggleCheckbox","nodeExpanded","deleteRow"],setup(n,{emit:t}){const o=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.length}),d=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.filter(a=>a.checked).length}),r=l=>{n.node.expanded=n.node.nodes?!n.node.expanded:!1,e.nextTick(()=>{t("nodeExpanded",l,n.node.expanded)})};return{childCount:o,checkedChildCount:d,handleClick:(l,a)=>{!a&&n.expandable&&o.value&&r(l),t("nodeClick",{...l})},onNodeExpanded:(l,a)=>{t("nodeExpanded",l,a)},onToggleCheckbox:l=>{t("toggleCheckbox",l)},removedRow:l=>{t("deleteRow",l)}}}},U={key:0,class:"tree-row-item-icon-wrapper"},W={class:"tree-row-txt"},G=e.createVNode("span",{class:"prepend-node-text"}," add your text here ",-1),J={class:"child-count"};function K(n,t,o,d,r,i){const s=e.resolveComponent("arrow-right"),f=e.resolveComponent("arrow-down"),k=e.resolveComponent("delete-icon"),l=e.resolveComponent("tree-row",!0);return e.openBlock(),e.createBlock("li",{class:"tree-row",style:{gap:`${o.gap}px`,paddingLeft:`${o.indentSize}px`,"--row-hover-background":o.rowHoverBackground}},[e.createVNode("div",{class:"tree-row-item",onClick:t[4]||(t[4]=e.withModifiers(a=>d.handleClick(o.node),["stop"]))},[o.useIcon?(e.openBlock(),e.createBlock("div",U,[d.childCount?(e.openBlock(),e.createBlock(e.Fragment,{key:0},[o.node.expanded?e.renderSlot(n.$slots,"iconInactive",{key:1},()=>[e.createVNode(f)]):e.renderSlot(n.$slots,"iconActive",{key:0},()=>[e.createVNode(s)])],64)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"checkbox",{id:o.node.id,node:o.node,checked:o.node.checked,indeterminate:o.node.indeterminate},()=>[o.useCheckbox?e.withDirectives((e.openBlock(),e.createBlock("input",{key:0,"onUpdate:modelValue":t[1]||(t[1]=a=>o.node.checked=a),type:"checkbox",checked:o.node.checked,indeterminate:o.node.indeterminate,onClick:t[2]||(t[2]=e.withModifiers(a=>d.onToggleCheckbox(o.node),["stop"]))},null,8,["checked","indeterminate"])),[[e.vModelCheckbox,o.node.checked]]):e.createCommentVNode("",!0)]),e.createVNode("span",W,e.toDisplayString(o.node.label),1),o.showPrependNodeText?e.renderSlot(n.$slots,"prependNodeText",{key:1,node:o.node},()=>[G]):e.createCommentVNode("",!0),d.childCount&&o.showChildCount?e.renderSlot(n.$slots,"childCount",{key:2,count:d.childCount,checkedCount:d.checkedChildCount,childs:o.node.nodes},()=>[e.createVNode("span",J,e.toDisplayString(d.childCount),1)]):e.createCommentVNode("",!0),!o.node.undeletable&&o.useRowDelete?(e.openBlock(),e.createBlock("div",{key:3,class:"delete-icon",onClick:t[3]||(t[3]=e.withModifiers(a=>d.removedRow(o.node),["stop"]))},[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(k)])])):e.createCommentVNode("",!0)]),o.node.expanded?(e.openBlock(),e.createBlock("ul",{key:0,class:"tree-list",style:{gap:`${o.gap}px`}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(o.node.nodes,a=>(e.openBlock(),e.createBlock(e.Fragment,{key:a.id},[a.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(l,{key:0,ref:`tree-row-${a.id}`,node:a,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,gap:o.gap,"expand-row-by-default":o.expandRowByDefault,"indent-size":o.indentSize,"row-hover-background":o.rowHoverBackground,"set-node":o.setNode,"get-node":o.getNode,"update-node":o.updateNode,expandable:o.expandable,"show-prepend-node-text":o.showPrependNodeText,onDeleteRow:d.removedRow,onNodeClick:t[5]||(t[5]=c=>d.handleClick(c,!0)),onToggleCheckbox:d.onToggleCheckbox,onNodeExpanded:d.onNodeExpanded},{prependNodeText:e.withCtx(({node:c})=>[e.renderSlot(n.$slots,"prependNodeText",{node:c})]),childCount:e.withCtx(({count:c,checkedCount:h,childs:_})=>[e.renderSlot(n.$slots,"childCount",{count:c,checkedCount:h,childs:_})]),iconActive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconActive",{},()=>[e.createVNode(s)])]),iconInactive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconInactive",{},()=>[e.createVNode(f)])]),deleteIcon:e.withCtx(()=>[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(k)])]),checkbox:e.withCtx(({node:c,checked:h,indeterminate:_})=>[e.renderSlot(n.$slots,"checkbox",{id:c.id,node:c,checked:h,indeterminate:_})]),_:2},1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","gap","expand-row-by-default","indent-size","row-hover-background","set-node","get-node","update-node","expandable","show-prepend-node-text","onDeleteRow","onToggleCheckbox","onNodeExpanded"]))],64))),128))],4)):e.createCommentVNode("",!0)],4)}var Q=g(L,[["render",K]]);const x=n=>n.map(t=>{var i;if(!((i=t.nodes)!=null&&i.length))return{...t,expanded:!1};t.nodes=x(t.nodes);const o=t.nodes.every(s=>s.checked),d=t.nodes.some(s=>s.checked),r=t.nodes.some(s=>s.indeterminate);return t.checked=o,t.indeterminate=!o&&(d||r),t}),B=(n,t)=>{let o=[...n];return o=o.map(d=>{let i={checked:!!(t==null?void 0:t.checked),expanded:!1,indeterminate:!1,...d};return Array.isArray(i.nodes)&&(i.nodes=B(i.nodes,i)),i}),x(o)},X=(n,t)=>{const o=(d,r)=>{if(r.label.toLowerCase().includes(t.toLowerCase()))return d.push(r),d;if(Array.isArray(r.nodes)){const s=r.nodes.reduce(o,[]);s.length&&d.push({...r,nodes:s})}return d};return n.reduce(o,[])};function C(n,t){for(let o=0;o<n.length;o++){const d=n[o];if(d.id===t)return d;if(Array.isArray(d.nodes)){const r=C(d.nodes,t);if(r)return r}}}const y=(n,t,o)=>n.map(d=>(d.id===t?d={id:t,...o}:Array.isArray(d.nodes)&&(d.nodes=y(d.nodes,t,o)),d));function b(n,t){const o=t!=null?t:n.checked;return n.checked=o,n&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.map(d=>{const r={...d,checked:o};return d.nodes?r.nodes.forEach(i=>b(i,o)):delete r.nodes,r})),n}const N=(n,t,o)=>n.map(d=>{let r=d;return r.id===t?r=b({...d,...o}):Array.isArray(r.nodes)&&(r.nodes=N(d.nodes,t,o)),r});function m(n,t){if(!Array.isArray(n))return;let o=[...n];for(let d=0;d<n.length;d++){const r=n[d];r.id===t?o=o.filter(i=>i.id!==t):r.nodes&&(r.nodes=m(r.nodes,t),r.nodes.length||delete r.nodes)}return o}function p(n){!n||(n.nodes&&n.nodes.forEach(p),n.expanded=!0)}var ee="";const Y={name:"Tree",components:{TreeRow:Q},props:{nodes:{type:Array,required:!0},props:{type:Object,default(){return{nodes:"nodes",label:"label"}}},indentSize:{type:Number,default:24},gap:{type:Number,default:10},searchText:{type:String,default:""},expandRowByDefault:{type:Boolean,default:!1},expandAllRowsOnSearch:{type:Boolean,default:!0},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0},showPrependNodeText:{type:Boolean,default:!1}},emits:["nodeClick","nodeExpanded","checkboxToggle","update:nodes"],setup(n,{emit:t}){e.onMounted(()=>t("update:nodes",B(n.nodes)));const o=e.computed(()=>{let c=n.nodes;return n.searchText&&(c=X(n.nodes,n.searchText),n.expandAllRowsOnSearch&&c.forEach(p)),x(c)}),d=c=>C(n.nodes,c),r=(c,h)=>{t("update:nodes",y(n.nodes,c,h))},i=(c,h)=>{t("update:nodes",x(N(n.nodes,c,h)))};return{setNode:r,getNode:d,updateNode:i,onNodeClick:c=>{t("nodeClick",c)},onNodeExpanded:(c,h)=>{t("nodeExpanded",c,h)},onUpdate:()=>{t("update:nodes",n.nodes)},onToggleCheckbox:c=>{const h=!c.checked;i(c.id,{checked:h}),t("nodeClick",{...c,checked:h})},onDeleteRow:c=>{m(n.nodes,c.id),t("update:nodes",x(m(n.nodes,c.id)))},filteredData:o}}},w=e.withScopeId("data-v-2462c08c");e.pushScopeId("data-v-2462c08c");const Z={class:"tree"};e.popScopeId();var $=g(Y,[["render",w((n,t,o,d,r,i)=>{const s=e.resolveComponent("tree-row");return e.openBlock(),e.createBlock("div",Z,[e.createVNode("ul",{class:"tree-list",style:{gap:`${o.gap}px`}},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(d.filteredData,f=>(e.openBlock(),e.createBlock(e.Fragment,{key:f.id},[f.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(s,{key:0,ref:`tree-row-${f.id}`,node:f,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,"indent-size":o.indentSize,gap:o.gap,"row-hover-background":o.rowHoverBackground,"set-node":d.setNode,"get-node":d.getNode,"update-node":d.updateNode,expandable:o.expandable,"show-prepend-node-text":o.showPrependNodeText,onDeleteRow:d.onDeleteRow,onNodeClick:d.onNodeClick,onNodeExpanded:d.onNodeExpanded,onToggleCheckbox:d.onToggleCheckbox},e.createSlots({checkbox:w(({node:k,checked:l,indeterminate:a})=>[e.renderSlot(n.$slots,"checkbox",{node:k,checked:l,indeterminate:a,toggleCheckbox:()=>d.onToggleCheckbox(k)},void 0,!0)]),_:2},[o.useIcon?{name:"iconActive",fn:w(()=>[e.renderSlot(n.$slots,"iconActive",{},void 0,!0)])}:void 0,o.useIcon?{name:"iconInactive",fn:w(()=>[e.renderSlot(n.$slots,"iconInactive",{},void 0,!0)])}:void 0,o.useRowDelete?{name:"deleteIcon",fn:w(()=>[e.renderSlot(n.$slots,"deleteIcon",{},void 0,!0)])}:void 0,o.showPrependNodeText?{name:"prependNodeText",fn:w(({node:k})=>[e.renderSlot(n.$slots,"prependNodeText",{node:k},void 0,!0)])}:void 0,o.showChildCount?{name:"childCount",fn:w(({count:k,checkedCount:l,childs:a})=>[e.renderSlot(n.$slots,"childCount",{count:k,checkedCount:l,childs:a},void 0,!0)])}:void 0]),1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","indent-size","gap","row-hover-background","set-node","get-node","update-node","expandable","show-prepend-node-text","onDeleteRow","onNodeClick","onNodeExpanded","onToggleCheckbox"]))],64))),128))],4)])})],["__scopeId","data-v-2462c08c"]]);return u.default=$,u.getNodeById=C,u.setNodeById=y,u.updateNodeById=N,Object.defineProperty(u,"__esModule",{value:!0}),u[Symbol.toStringTag]="Module",u}({},Vue);
