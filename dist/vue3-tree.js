var Tree=function(u,e){"use strict";var w=(n,t)=>{const o=n.__vccOpts||n;for(const[d,r]of t)o[d]=r;return o};const E={},S={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},R=[e.createElementVNode("polyline",{points:"9 18 15 12 9 6"},null,-1)];function D(n,t){return e.openBlock(),e.createElementBlock("svg",S,R)}var I=w(E,[["render",D]]);const T={},p={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},A=[e.createElementVNode("polyline",{points:"6 9 12 15 18 9"},null,-1)];function V(n,t){return e.openBlock(),e.createElementBlock("svg",p,A)}var z=w(T,[["render",V]]);const M={},F={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},q=[e.createElementVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),e.createElementVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1)];function j(n,t){return e.openBlock(),e.createElementBlock("svg",F,q)}var O=w(M,[["render",j]]),ne="";const H={components:{ArrowRight:I,ArrowDown:z,DeleteIcon:O},props:{node:{type:Object,required:!0},indentSize:{type:Number,required:!0},gap:{type:Number,required:!0},getNode:{type:Function,required:!0},setNode:{type:Function,required:!0},updateNode:{type:Function,required:!0},expandRowByDefault:{type:Boolean,default:!1},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0},showPrependNodeText:{type:Boolean,default:!1}},emits:["nodeClick","toggleCheckbox","nodeExpanded","deleteRow"],setup(n,{emit:t}){const o=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.length}),d=e.computed(()=>{var l;return(l=n.node.nodes)==null?void 0:l.filter(a=>a.checked).length}),r=l=>{n.node.expanded=n.node.nodes?!n.node.expanded:!1,e.nextTick(()=>{t("nodeExpanded",l,n.node.expanded)})};return{childCount:o,checkedChildCount:d,handleClick:(l,a)=>{!a&&n.expandable&&o.value&&r(l),t("nodeClick",{...l})},onNodeExpanded:(l,a)=>{t("nodeExpanded",l,a)},onToggleCheckbox:l=>{t("toggleCheckbox",l)},removedRow:l=>{t("deleteRow",l)}}}},L={key:0,class:"tree-row-item-icon-wrapper"},P=["checked","indeterminate"],U={class:"tree-row-txt"},W={class:"child-count"};function G(n,t,o,d,r,i){const s=e.resolveComponent("arrow-right"),f=e.resolveComponent("arrow-down"),k=e.resolveComponent("delete-icon"),l=e.resolveComponent("tree-row",!0);return e.openBlock(),e.createElementBlock("li",{class:"tree-row",style:e.normalizeStyle({gap:`${o.gap}px`,paddingLeft:`${o.indentSize}px`,"--row-hover-background":o.rowHoverBackground})},[e.createElementVNode("div",{class:"tree-row-item",onClick:t[3]||(t[3]=e.withModifiers(a=>d.handleClick(o.node),["stop"]))},[o.useIcon?(e.openBlock(),e.createElementBlock("div",L,[d.childCount?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o.node.expanded?e.renderSlot(n.$slots,"iconInactive",{key:1},()=>[e.createVNode(f)]):e.renderSlot(n.$slots,"iconActive",{key:0},()=>[e.createVNode(s)])],64)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"checkbox",{id:o.node.id,node:o.node,checked:o.node.checked,indeterminate:o.node.indeterminate},()=>[o.useCheckbox?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=a=>o.node.checked=a),type:"checkbox",checked:o.node.checked,indeterminate:o.node.indeterminate,onClick:t[1]||(t[1]=e.withModifiers(a=>d.onToggleCheckbox(o.node),["stop"]))},null,8,P)),[[e.vModelCheckbox,o.node.checked]]):e.createCommentVNode("",!0)]),e.renderSlot(n.$slots,"node",{node:o.node},()=>[e.createElementVNode("span",U,e.toDisplayString(o.node.label),1)]),d.childCount&&o.showChildCount?e.renderSlot(n.$slots,"childCount",{key:1,count:d.childCount,checkedCount:d.checkedChildCount,childs:o.node.nodes},()=>[e.createElementVNode("span",W,e.toDisplayString(d.childCount),1)]):e.createCommentVNode("",!0),!o.node.undeletable&&o.useRowDelete?(e.openBlock(),e.createElementBlock("div",{key:2,class:"delete-icon",onClick:t[2]||(t[2]=e.withModifiers(a=>d.removedRow(o.node),["stop"]))},[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(k)])])):e.createCommentVNode("",!0)]),o.node.expanded?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"tree-list",style:e.normalizeStyle({gap:`${o.gap}px`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.node.nodes,a=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:a.id},[a.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(l,{key:0,ref_for:!0,ref:`tree-row-${a.id}`,node:a,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,gap:o.gap,"expand-row-by-default":o.expandRowByDefault,"indent-size":o.indentSize,"row-hover-background":o.rowHoverBackground,"set-node":o.setNode,"get-node":o.getNode,"update-node":o.updateNode,expandable:o.expandable,onDeleteRow:d.removedRow,onNodeClick:t[4]||(t[4]=c=>d.handleClick(c,!0)),onToggleCheckbox:d.onToggleCheckbox,onNodeExpanded:d.onNodeExpanded},{node:e.withCtx(({node:c})=>[e.renderSlot(n.$slots,"node",{node:c})]),childCount:e.withCtx(({count:c,checkedCount:h,childs:x})=>[e.renderSlot(n.$slots,"childCount",{count:c,checkedCount:h,childs:x})]),iconActive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconActive",{},()=>[e.createVNode(s)])]),iconInactive:e.withCtx(()=>[e.renderSlot(n.$slots,"iconInactive",{},()=>[e.createVNode(f)])]),deleteIcon:e.withCtx(()=>[e.renderSlot(n.$slots,"deleteIcon",{},()=>[e.createVNode(k)])]),checkbox:e.withCtx(({node:c,checked:h,indeterminate:x})=>[e.renderSlot(n.$slots,"checkbox",{id:c.id,node:c,checked:h,indeterminate:x})]),_:2},1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","gap","expand-row-by-default","indent-size","row-hover-background","set-node","get-node","update-node","expandable","onDeleteRow","onToggleCheckbox","onNodeExpanded"]))],64))),128))],4)):e.createCommentVNode("",!0)],4)}var J=w(H,[["render",G]]);const _=n=>n.map(t=>{var i;if(console.log("updateNodes"),!((i=t.nodes)!=null&&i.length))return{...t,expanded:!1};const o=t.nodes.every(s=>s.checked),d=t.nodes.some(s=>s.checked),r=t.nodes.some(s=>s.indeterminate);return t.checked=o,t.indeterminate=!o&&(d||r),t}),N=(n,t)=>{let o=[...n];return o=o.map(d=>{let i={checked:!!(t==null?void 0:t.checked),expanded:!1,indeterminate:!1,...d};return Array.isArray(i.nodes)&&(i.nodes=N(i.nodes,i)),i}),o},K=(n,t)=>{const o=(d,r)=>{if(r.label.toLowerCase().includes(t.toLowerCase()))return d.push(r),d;if(Array.isArray(r.nodes)){const s=r.nodes.reduce(o,[]);s.length&&d.push({...r,nodes:s})}return d};return n.reduce(o,[])};function g(n,t){for(let o=0;o<n.length;o++){const d=n[o];if(d.id===t)return d;if(Array.isArray(d.nodes)){const r=g(d.nodes,t);if(r)return r}}}const C=(n,t,o)=>n.map(d=>(d.id===t?d={id:t,...o}:Array.isArray(d.nodes)&&(d.nodes=C(d.nodes,t,o)),d));function B(n,t){const o=t!=null?t:n.checked;return n.checked=o,n&&Array.isArray(n.nodes)&&(n.nodes=n.nodes.map(d=>{const r={...d,checked:o};return d.nodes?r.nodes.forEach(i=>B(i,o)):delete r.nodes,r})),n}const m=(n,t,o)=>n.map(d=>{let r=d;return r.id===t?r=B({...d,...o}):Array.isArray(r.nodes)&&(r.nodes=m(d.nodes,t,o)),r});function y(n,t){if(!Array.isArray(n))return;let o=[...n];for(let d=0;d<n.length;d++){const r=n[d];r.id===t?o=o.filter(i=>i.id!==t):r.nodes&&(r.nodes=y(r.nodes,t),r.nodes.length||delete r.nodes)}return o}function b(n){!n||(n.nodes&&n.nodes.forEach(b),n.expanded=!0)}var te="";const Q={name:"Tree",components:{TreeRow:J},props:{nodes:{type:Array,required:!0},props:{type:Object,default(){return{nodes:"nodes",label:"label"}}},indentSize:{type:Number,default:24},gap:{type:Number,default:10},searchText:{type:String,default:""},expandRowByDefault:{type:Boolean,default:!1},expandAllRowsOnSearch:{type:Boolean,default:!0},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},useRowDelete:{type:Boolean,default:!1},showChildCount:{type:Boolean,default:!1},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0}},emits:["nodeClick","nodeExpanded","checkboxToggle","update:nodes"],setup(n,{emit:t}){e.onMounted(()=>t("update:nodes",N(n.nodes)));const o=e.computed(()=>{let c=n.nodes;return n.searchText&&(c=K(n.nodes,n.searchText),n.expandAllRowsOnSearch&&c.forEach(b)),c}),d=c=>g(n.nodes,c),r=(c,h)=>{t("update:nodes",C(n.nodes,c,h))},i=(c,h)=>{t("update:nodes",_(m(n.nodes,c,h)))};return{setNode:r,getNode:d,updateNode:i,onNodeClick:c=>{t("nodeClick",c)},onNodeExpanded:(c,h)=>{t("nodeExpanded",c,h)},onUpdate:()=>{t("update:nodes",n.nodes)},onToggleCheckbox:c=>{const h=!c.checked;i(c.id,{checked:h}),t("nodeClick",{...c,checked:h}),t("checkboxToggle",{...c,checked:h})},onDeleteRow:c=>{y(n.nodes,c.id),t("update:nodes",_(y(n.nodes,c.id)))},filteredData:o}}},X={class:"tree"};function Y(n,t,o,d,r,i){const s=e.resolveComponent("tree-row");return e.openBlock(),e.createElementBlock("div",X,[e.createElementVNode("ul",{class:"tree-list",style:e.normalizeStyle({gap:`${o.gap}px`})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.filteredData,f=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:f.id},[f.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(s,{key:0,ref_for:!0,ref:`tree-row-${f.id}`,node:f,"use-checkbox":o.useCheckbox,"use-icon":o.useIcon,"use-row-delete":o.useRowDelete,"show-child-count":o.showChildCount,"indent-size":o.indentSize,gap:o.gap,"row-hover-background":o.rowHoverBackground,"set-node":d.setNode,"get-node":d.getNode,"update-node":d.updateNode,expandable:o.expandable,onDeleteRow:d.onDeleteRow,onNodeClick:d.onNodeClick,onNodeExpanded:d.onNodeExpanded,onToggleCheckbox:d.onToggleCheckbox},e.createSlots({checkbox:e.withCtx(({node:k,checked:l,indeterminate:a})=>[e.renderSlot(n.$slots,"checkbox",{node:k,checked:l,indeterminate:a,toggleCheckbox:()=>d.onToggleCheckbox(k)},void 0,!0)]),node:e.withCtx(({node:k})=>[e.renderSlot(n.$slots,"node",{node:k},void 0,!0)]),_:2},[o.useIcon?{name:"iconActive",fn:e.withCtx(()=>[e.renderSlot(n.$slots,"iconActive",{},void 0,!0)]),key:"0"}:void 0,o.useIcon?{name:"iconInactive",fn:e.withCtx(()=>[e.renderSlot(n.$slots,"iconInactive",{},void 0,!0)]),key:"1"}:void 0,o.useRowDelete?{name:"deleteIcon",fn:e.withCtx(()=>[e.renderSlot(n.$slots,"deleteIcon",{},void 0,!0)]),key:"2"}:void 0,o.showChildCount?{name:"childCount",fn:e.withCtx(({count:k,checkedCount:l,childs:a})=>[e.renderSlot(n.$slots,"childCount",{count:k,checkedCount:l,childs:a},void 0,!0)]),key:"3"}:void 0]),1032,["node","use-checkbox","use-icon","use-row-delete","show-child-count","indent-size","gap","row-hover-background","set-node","get-node","update-node","expandable","onDeleteRow","onNodeClick","onNodeExpanded","onToggleCheckbox"]))],64))),128))],4)])}var Z=w(Q,[["render",Y],["__scopeId","data-v-530a65bc"]]);return u.default=Z,u.getNodeById=g,u.setNodeById=C,u.updateNodeById=m,Object.defineProperty(u,"__esModule",{value:!0}),u[Symbol.toStringTag]="Module",u}({},Vue);
